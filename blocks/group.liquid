{% doc %}
  Renders a group of blocks with configurable layout direction, gap and
  alignment.

  All settings apply to only one dimension to reduce configuration complexity.

  This component is a wrapper concerned only with rendering its children in
  the specified layout direction with appropriate padding and alignment.

  @example
  {% content_for 'block', type: 'group', id: 'group' %}
{% enddoc %}

{% liquid
  if block.settings.layout_direction == 'group--horizontal'
    assign layout_classes = 'flex flex-row flex-nowrap justify-between items-center overflow-hidden w-full'
    assign padding_style = 'padding-left: ' | append: block.settings.padding | append: 'px; padding-right: ' | append: block.settings.padding | append: 'px;'
  else
    assign layout_classes = 'flex flex-col flex-nowrap overflow-hidden w-full'
    assign padding_style = 'padding-top: ' | append: block.settings.padding | append: 'px; padding-bottom: ' | append: block.settings.padding | append: 'px;'

    case block.settings.alignment
      when 'flex-start'
        assign layout_classes = layout_classes | append: ' items-start'
      when 'center'
        assign layout_classes = layout_classes | append: ' items-center'
      when 'flex-end'
        assign layout_classes = layout_classes | append: ' items-end'
    endcase
  endif
%}

<div
  class="{{ layout_classes }}"
  style="{{ padding_style }}"
  {{ block.shopify_attributes }}
>
  {% content_for 'blocks' %}
</div>

{% schema %}
{
  "name": "t:general.group",
  "blocks": [{ "type": "@theme" }],
  "settings": [
    {
      "type": "select",
      "id": "layout_direction",
      "label": "t:labels.layout_direction",
      "default": "group--vertical",
      "options": [
        { "value": "group--horizontal", "label": "t:options.direction.horizontal" },
        { "value": "group--vertical", "label": "t:options.direction.vertical" }
      ]
    },
    {
      "visible_if": "{{ block.settings.layout_direction == 'group--vertical' }}",
      "type": "select",
      "id": "alignment",
      "label": "t:labels.alignment",
      "default": "flex-start",
      "options": [
        { "value": "flex-start", "label": "t:options.alignment.left" },
        { "value": "center", "label": "t:options.alignment.center" },
        { "value": "flex-end", "label": "t:options.alignment.right" }
      ]
    },
    {
      "type": "range",
      "id": "padding",
      "label": "t:labels.padding",
      "default": 0,
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "t:general.column",
      "category": "t:general.layout",
      "settings": {
        "layout_direction": "group--vertical",
        "alignment": "flex-start",
        "padding": 0
      }
    },
    {
      "name": "t:general.row",
      "category": "t:general.layout",
      "settings": {
        "layout_direction": "group--horizontal",
        "padding": 0
      }
    }
  ]
}
{% endschema %}
