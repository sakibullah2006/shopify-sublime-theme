{% comment %}
  This section is used in the article template to render the article page, which
  displays the full content of the blog post and can optionally include a
  comments section for customers (not shown in this example).

  https://shopify.dev/docs/storefronts/themes/architecture/templates/article
{% endcomment %}

<article class="py-8 px-4 md:px-8 max-w-4xl mx-auto">
  {% if article.image %}
    <div class="mb-8 rounded-lg overflow-hidden">
      {{ article.image | image_url: width: 1000 | image_tag: class: 'w-full h-auto' }}
    </div>
  {% endif %}

  <header class="mb-8">
    <h1 class="text-3xl md:text-4xl font-bold mb-4">{{ article.title }}</h1>
    {% assign date = article.published_at | time_tag: format: 'date' %}
    <p class="text-neutral-600">{{ 'blog.article_metadata_html' | t: date: date, author: article.author }}</p>
  </header>

  <div class="prose prose-neutral max-w-none mb-12">
    {{ article.content }}
  </div>

  {% if blog.comments_enabled? %}
    <section id="comments" class="border-t border-neutral-200 pt-8">
      <h2 class="text-2xl font-semibold mb-6">{{ 'blog.article_comments' | t }}</h2>

      {% paginate article.comments by 10 %}
        <div class="space-y-6 mb-8">
          {% for comment in article.comments %}
            <div class="p-4 bg-neutral-50 rounded-lg">
              <div class="flex items-center gap-2 mb-2">
                <p class="font-medium">{{ comment.author }}</p>
                <span class="text-neutral-400">â€¢</span>
                <p class="text-sm text-neutral-600">{{ comment.created_at | time_tag: format: 'date' }}</p>
              </div>
              <p class="text-neutral-700">{{ comment.content }}</p>
            </div>
          {% endfor %}
        </div>

        <div class="flex justify-center gap-2 mb-12">
          {{ paginate | default_pagination: anchor: 'comments' }}
        </div>
      {% endpaginate %}

      {% form 'new_comment', article %}
        <div class="bg-neutral-50 p-6 rounded-lg">
          <h3 class="text-xl font-semibold mb-4">{{ 'blog.comment_form_title' | t }}</h3>

          {{ form.errors | default_errors }}

          <div class="space-y-4">
            <div>
              <label for="author" class="block text-sm font-medium mb-1">{{ 'blog.comment_form_name' | t }}</label>
              <input
                type="text"
                name="comment[author]"
                id="author"
                value="{{ form.author }}"
                required
                class="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent"
              >
            </div>

            <div>
              <label for="email" class="block text-sm font-medium mb-1">{{ 'blog.comment_form_email' | t }}</label>
              <input
                type="email"
                name="comment[email]"
                id="email"
                value="{{ form.email }}"
                required
                class="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent"
              >
            </div>

            <div>
              <label for="body" class="block text-sm font-medium mb-1">{{ 'blog.comment_form_body' | t }}</label>
              <textarea
                name="comment[body]"
                id="body"
                required
                rows="4"
                class="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent resize-y"
              >{{ form.body }}</textarea>
            </div>

            <input
              type="submit"
              value="{{ 'blog.comment_form_submit' | t }}"
              class="px-6 py-2 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 transition-colors cursor-pointer"
            >
          </div>
        </div>
      {% endform %}
    </section>
  {% endif %}
</article>

{% schema %}
{
  "name": "t:general.article",
  "settings": []
}
{% endschema %}
