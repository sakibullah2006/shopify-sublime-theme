{% comment %}
  This section is used in the product template to render product page with
  media, content, and add-to-cart form.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/product
{% endcomment %}

<div class="py-8 px-4 md:px-8">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 max-w-6xl mx-auto">
    <!-- Product Images -->
    <div class="space-y-4">
      {% for image in product.images %}
        <div class="overflow-hidden rounded-lg bg-neutral-100">
          {{ image | image_url: width: 800 | image_tag: class: 'w-full h-auto' }}
        </div>
      {% endfor %}
    </div>

    <!-- Product Info -->
    <div class="lg:sticky lg:top-24 lg:self-start">
      <div class="space-y-6">
        <div>
          <h1 class="text-3xl font-bold mb-2">{{ product.title }}</h1>
          <p class="text-2xl text-neutral-900">{{ product.price | money }}</p>
        </div>

        {% if product.description != blank %}
          <div class="prose prose-neutral">
            {{ product.description }}
          </div>
        {% endif %}

        <!-- Product Form -->
        {% form 'product', product %}
          {% assign current_variant = product.selected_or_first_available_variant %}

          {% if product.variants.size > 1 %}
            <div class="mb-6">
              <label for="variant-select" class="block text-sm font-medium mb-2">{{ 'product.options' | t }}</label>
              <select
                name="id"
                id="variant-select"
                class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent bg-white"
              >
                {% for variant in product.variants %}
                  <option
                    value="{{ variant.id }}"
                    {% if variant == current_variant %}
                      selected="selected"
                    {% endif %}
                    {% unless variant.available %}
                      disabled
                    {% endunless %}
                  >
                    {{ variant.title }} - {{ variant.price | money }}
                    {% unless variant.available %} - {{ 'product.sold_out' | t }}{% endunless %}
                  </option>
                {% endfor %}
              </select>
            </div>
          {% else %}
            <input type="hidden" name="id" value="{{ current_variant.id }}">
          {% endif %}

          <div class="flex gap-3 mb-6">
            <div class="w-24">
              <label for="quantity" class="block text-sm font-medium mb-2">{{ 'product.quantity' | t }}</label>
              <input
                type="number"
                name="quantity"
                id="quantity"
                min="1"
                value="1"
                class="w-full px-4 py-3 text-center border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent"
              >
            </div>
          </div>

          <div class="space-y-3">
            <button
              type="submit"
              class="w-full px-6 py-3 bg-neutral-900 text-white rounded-lg hover:bg-neutral-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              {% unless current_variant.available %}
                disabled
              {% endunless %}
            >
              {% if current_variant.available %}
                {{ 'product.add_to_cart' | t }}
              {% else %}
                {{ 'product.sold_out' | t }}
              {% endif %}
            </button>

            {{ form | payment_button }}
          </div>
        {% endform %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:general.product",
  "settings": [],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
}
{% endschema %}
